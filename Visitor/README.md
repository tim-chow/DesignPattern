### 简介  

在开发过程中，通常存在**将多个不同*类型*的元素对象，放进同一个*objectstructure*(集合)中**的情况。并且这些元素对象会接收一类被称为**访问者**的对象的访问，而且不同的访问者对象对元素对象的访问方式也不同。    

用一个生活中的例子进行说明，在超市购物的时候，顾客会把**不同类型**的物品，比如苹果、图书，放进**同一个**购物车。这些物品接受顾客 和 收银员 的访问，顾客对物品的访问方式是：检查这些物品是否在保质期等；收银员对物品的访问方式是：获取物品的价格。  

在这种情况下。如果把不同访问者对同一元素对象的访问 **封装** 进元素对象，那么就会**污染**元素对象，并且在新增访问者的时候，需要改变所有的元素对象。因此，在**访问者模式**中，**将访问者对象 对 所有 元素对象 的 访问方式 封装进 访问者对象**；**元素对象需要实现accept方法，该方法接受访问者对象作为参数，并调用访问者对象对该元素对象的访问方式**。  

---

### 角色 

* Visitor  
抽象访问者。其中定义了 对每一种元素对象的访问方式  
* ConcreteVisitor  
继承或实现Visitor   
* ObjectStructure   
对象结构。本质上是一个集合，需要提供增加或移除元素对象的方法
* Element      
抽象元素角色。需要定义accept方法  
* ConcreteElement    
继承或实现Element  

---

### UML类图  

![visitor.png](http://images.timd.cn/design-pattern/visitor.png)    
